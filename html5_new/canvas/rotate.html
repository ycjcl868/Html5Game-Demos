<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>坐标变换</title>

    <style>
        canvas{
            border:1px solid red;
        }
    </style>
</head>
<body>

<img src="../../images/box.png" id="img1" alt="">

<canvas id="can" width="300" height="500"></canvas>

<script>

    /**
     * 公布的一组 API
     * translate(x,y):  平移 , 坐标原点
     * scale(x,y): 缩放，把画布放大, x：水平放大倍数   y：垂直放大倍数
     * rotate(angle): 把图形进行旋转，旋转的中心是坐标原点，顺时针旋转，以弧度表示
     * transform(m11,m12,m21,m22,dx,dy) 乘上这个矩阵
     * setTransform(m11,m12,m21,m22,dx,dy)  设置这个矩阵
     *
     *
     *
     */

    function $(id) {
        return document.getElementById(id);
    }







    // 绘制图像
    function draw() {
        /**
         * 这里使用 requestAnimationFrame 优化动画
         */
        requestAnimationFrame(draw);
        // 保存变换矩阵
        ctx.save();
        // 清除屏幕
        ctx.clearRect(0,0,width,height);
        ctx.translate(cx,cy);
        deg+=2;
        ctx.rotate(deg*Math.PI/180);
        ctx.drawImage(img,-iw*0.5,-ih*0.5);
        // 恢复变换矩阵
        ctx.restore();

    }

    document.body.onload = function () {
        // 定义旋转角度
        deg = 0;
        can = $('can');
        img = $('img1');
        width = can.width,
                height = can.height,
                iw = img.width,
                ih = img.height;
        ctx = can.getContext('2d');
        cx = can.width*0.5,
                cy = can.height*0.5;
//        window.setInterval(function () {
//
//            draw();
//        },30);
        draw();

    }




</script>


</body>
</html>
